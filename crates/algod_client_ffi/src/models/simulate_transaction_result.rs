/*
 * Algod REST API.
 *
 * API endpoint for algod operations.
 *
 * The version of the OpenAPI document: 0.0.1
 * Contact: contact@algorand.com
 * Generated by: Rust OpenAPI Generator
 */

use crate::models;
use algod_client::models::SimulateTransactionResult as RustSimulateTransactionResult;
use algokit_transact_ffi::SignedTransaction as AlgokitSignedTransaction;

use crate::models::PendingTransactionResponse;
use crate::models::SimulateUnnamedResourcesAccessed;
use crate::models::SimulationTransactionExecTrace;

/// Simulation result for an individual transaction
#[derive(Clone, Default, Debug, PartialEq, uniffi::Record)]
pub struct SimulateTransactionResult {
    pub txn_result: PendingTransactionResponse,
    /// Budget used during execution of an app call transaction. This value includes budged used by inner app calls spawned by this transaction.
    pub app_budget_consumed: Option<u32>,
    /// Budget used during execution of a logic sig transaction.
    pub logic_sig_budget_consumed: Option<u32>,
    pub exec_trace: Option<SimulationTransactionExecTrace>,
    pub unnamed_resources_accessed: Option<SimulateUnnamedResourcesAccessed>,
    /// The account that needed to sign this transaction when no signature was provided and the provided signer was incorrect.
    pub fixed_signer: Option<String>,
}

impl From<RustSimulateTransactionResult> for SimulateTransactionResult {
    fn from(rust_struct: RustSimulateTransactionResult) -> Self {
        Self {
            txn_result: rust_struct.txn_result.into(),
            app_budget_consumed: rust_struct.app_budget_consumed.map(|v| v.into()),
            logic_sig_budget_consumed: rust_struct.logic_sig_budget_consumed.map(|v| v.into()),
            exec_trace: rust_struct.exec_trace.map(|v| v.into()),
            unnamed_resources_accessed: rust_struct.unnamed_resources_accessed.map(|v| v.into()),
            fixed_signer: rust_struct.fixed_signer.map(|v| v.into()),
        }
    }
}

impl From<SimulateTransactionResult> for RustSimulateTransactionResult {
    fn from(ffi_struct: SimulateTransactionResult) -> Self {
        Self {
            txn_result: ffi_struct.txn_result.into(),
            app_budget_consumed: ffi_struct.app_budget_consumed.map(|v| v.into()),
            logic_sig_budget_consumed: ffi_struct.logic_sig_budget_consumed.map(|v| v.into()),
            exec_trace: ffi_struct.exec_trace.map(|v| v.into()),
            unnamed_resources_accessed: ffi_struct.unnamed_resources_accessed.map(|v| v.into()),
            fixed_signer: ffi_struct.fixed_signer.map(|v| v.into()),
        }
    }
}
