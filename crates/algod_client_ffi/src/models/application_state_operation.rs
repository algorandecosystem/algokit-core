/*
 * Algod REST API.
 *
 * API endpoint for algod operations.
 *
 * The version of the OpenAPI document: 0.0.1
 * Contact: contact@algorand.com
 * Generated by: Rust OpenAPI Generator
 */

use crate::models;
use algod_client::models::ApplicationStateOperation as RustApplicationStateOperation;
use algokit_transact_ffi::SignedTransaction as AlgokitSignedTransaction;

use crate::models::AvmValue;

/// An operation against an application's global/local/box state.
#[derive(Clone, Default, Debug, PartialEq, uniffi::Record)]
pub struct ApplicationStateOperation {
    /// Operation type. Value `w` is **write**, `d` is **delete**.
    pub operation: String,
    /// Type of application state. Value `g` is **global state**, `l` is **local state**, `b` is **boxes**.
    pub app_state_type: String,
    /// The key (name) of the global/local/box state.
    pub key: Vec<u8>,
    pub new_value: Option<AvmValue>,
    /// For local state changes, the address of the account associated with the local state.
    pub account: Option<String>,
}

impl From<RustApplicationStateOperation> for ApplicationStateOperation {
    fn from(rust_struct: RustApplicationStateOperation) -> Self {
        Self {
            operation: rust_struct.operation.into(),
            app_state_type: rust_struct.app_state_type.into(),
            key: rust_struct.key.into(),
            new_value: rust_struct.new_value.into(),
            account: rust_struct.account.into(),
        }
    }
}

impl From<ApplicationStateOperation> for RustApplicationStateOperation {
    fn from(ffi_struct: ApplicationStateOperation) -> Self {
        Self {
            operation: ffi_struct.operation.into(),
            app_state_type: ffi_struct.app_state_type.into(),
            key: ffi_struct.key.into(),
            new_value: ffi_struct.new_value.into(),
            account: ffi_struct.account.into(),
        }
    }
}
