/*
 * Parameter Enums for {{ spec.info.title }}
 *
 * Auto-generated enums for parameters with constrained string values.
 *
 * Generated by: Rust OpenAPI Generator
 */

{% if not ffi %}
use serde::{Deserialize, Serialize};
use std::fmt;
use std::str::FromStr;
{% endif %}

{% for enum_name, enum_data in parameter_enums.items() %}
{% if enum_data.enum_values %}
{{ (enum_data.description or "Parameter enum for " + enum_name.lower()) | rust_doc_comment }}
#[derive(Debug, Clone, Copy, PartialEq, Eq)]
{% if not ffi %} #[derive(Serialize, Deserialize)] {% endif %}
{% if ffi %} #[derive(uniffi::Enum)] {% else %} #[serde(rename_all = "lowercase")] {% endif %}
pub enum {{ enum_name }} {
{% for value in enum_data.enum_values %}
    /// {{ value }}
    {% if value == "json" %}Json{% elif value == "msgpack" %}Msgpack{% else %}{{ value | pascal_case }}{% endif %},
{% endfor %}
}

{% if ffi %}
impl From<{{ enum_name }}> for algod_client::apis::{{ enum_name }} {
    fn from(value: {{ enum_name }}) -> Self {
        match value {
{% for value in enum_data.enum_values %}
        {% if value == "json" %}
        {{ enum_name }}::Json => algod_client::apis::{{ enum_name }}::Json
        {% elif value == "msgpack" %}
        {{ enum_name }}::Msgpack => algod_client::apis::{{ enum_name }}::Msgpack
        {% else %}
         {{ enum_name }}::{{ value | pascal_case }} => algod_client::apis::{{ enum_name }}::{{ value | pascal_case }}
        {% endif %},
{% endfor %}
        }
    }
}

impl From<algod_client::apis::{{ enum_name }}> for {{ enum_name }} {
    fn from(value: algod_client::apis::{{ enum_name }}) -> Self {
        match value {
{% for value in enum_data.enum_values %}
        {% if value == "json" %}
        algod_client::apis::{{ enum_name }}::Json => {{ enum_name }}::Json
        {% elif value == "msgpack" %}
        algod_client::apis::{{ enum_name }}::Msgpack => {{ enum_name }}::Msgpack
        {% else %}
         algod_client::apis::{{ enum_name }}::{{ value | pascal_case }} => {{ enum_name }}::{{ value | pascal_case }}
        {% endif %},
{% endfor %}
        }
    }
}
{% endif %}

{% if not ffi %}
impl fmt::Display for {{ enum_name }} {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        let value = match self {
{% for value in enum_data.enum_values %}
            {{ enum_name }}::{% if value == "json" %}Json{% elif value == "msgpack" %}Msgpack{% else %}{{ value | pascal_case }}{% endif %} => "{{ value }}",
{% endfor %}
        };
        write!(f, "{}", value)
    }
}

impl FromStr for {{ enum_name }} {
    type Err = String;

    fn from_str(s: &str) -> Result<Self, Self::Err> {
        match s {
{% for value in enum_data.enum_values %}
            "{{ value }}" => Ok({{ enum_name }}::{% if value == "json" %}Json{% elif value == "msgpack" %}Msgpack{% else %}{{ value | pascal_case }}{% endif %}),
{% endfor %}
            _ => Err(format!("Invalid {{ enum_name }}: {}", s)),
        }
    }
}

{% endif %}
{% endif %}
{% endfor %}
